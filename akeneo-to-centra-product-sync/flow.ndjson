{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"alumio-to-centra-products-incoming","name":"Alumio to Centra - Products (Incoming)","object":{"parameters":{"job":[{"prototype":"run-incoming","parameters":{"incoming":"synchronize-products-akeneo-to-centra-fetch-storage-product-model-alumio-base"}},{"prototype":"run-incoming","parameters":{"incoming":"akeneo-fetch-simple-products-or-products-without-parent"}}],"handlers":[],"priority":2,"expression":"*/15 * * * *"}},"description":"**Schedulers in this incoming are as follows:**\n\n1. Run the incoming to fetch Alumio base Products from Alumio storage\n2. Run the incoming to fetch the Akeneo Simple products from the Akeneo server","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"synchronize-products-akeneo-to-centra-fetch-storage-product-model-alumio-base","name":"Synchronize Products - Akeneo to Centra - Fetch Storage Product Model Alumio Base","object":{"parameters":{"entityType":"base-product","subscriber":{"prototype":"storage-subscriber","parameters":{"storage":"alumio-product-model-parent-alumio-base-product-model"}},"transformers":["akeneo-to-centra-products-filter-by-previous-storage-entities"]}},"description":"Incoming for fetch products data (Alumio base) from Alumio Storage","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"alumio-product-model-parent-alumio-base-product-model","name":"Alumio - Product Model Parent - Alumio Base Product Model","object":{"parameters":{"path":"alumio-product-model-parent-alumio-base-product-model-01K4MNXVSPW9VRR6P6JP3ECGM2","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"entity","identifier":"base-product","name":"Base - Product","object":{"parameters":{"link":"https://schemas.alumio.com/v2/Product.json","schema":{"$ref":"https://schemas.alumio.com/v2/Product.json"},"identifierPath":["code"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-to-centra-products-filter-by-previous-storage-entities","name":"Akeneo to Centra - Products - FIlter By Previous storage entities","object":{"meta":[],"prototype":"storage-filter-stored-entity","parameters":{"storage":"akeneo-to-centra-products-delta-storage","addEntityToStorage":true}},"description":"Transformer to filter the previous stored entities Akeneo Products.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-to-centra-products-delta-storage","name":"Akeneo to Centra - Products - Delta Storage","object":{"parameters":{"path":"akeneo-to-centra-products-delta-storage-01K6KZEC2R7T41KZZYVXTVC4JB","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"incoming-configuration","identifier":"akeneo-fetch-simple-products-or-products-without-parent","name":"Akeneo - Fetch - Simple products or products without parent","object":{"parameters":{"subscriber":{"prototype":"http-subscriber","parameters":{"client":"akeneo-http-client","request":{"uri":"/api/rest/v1/products?limit=100&pagination_type=search_after&search=&{search}","payload":[],"plugins":[],"payloadType":"data","authentications":[]},"pagination":{"prototype":"next","parameters":{"pattern":"_links.next","pageLimit":10000}},"transformer":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"search","value":{"parent":[{"operator":"EMPTY"}]},"mappers":[{"prototype":"serialize-json","parameters":{"flags":[]}}]}]}}]}},"deserializer":{"prototype":"json","parameters":{"pattern":"_embedded.items","readMethod":"wholeFile","encodeInput":false}},"requestListeners":[]}},"transformers":["akeneo-prepare-convert-values-to-localizations-and-custom-attributes","akeneo-prepare-convert-localizations-filter","akeneo-prepare-convert-product-and-product-model-categories-to-alumio-base","akeneo-prepare-convert-product-and-product-model-prices-to-alumio-base","akeneo-convert-product-to-alumio-base-product","akeneo-filter-simple-product"]}},"description":"There some products data without product model in Akeneo.\n\nThis will become a simple product for other system","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"akeneo-http-client","name":"Akeneo - HTTP Client","object":{"prototype":"akeneo-http-client-v2","parameters":{"key":"","baseUri":"${AKENEO_BASE_URL}","advanced":[],"clientId":"${AKENEO_CLIENT_ID}","password":"${AKENEO_PASSWORD}","username":"${AKENEO_USERNAME}","clientSecret":"${AKENEO_CLIENT_SECRET}","enableLogging":true,"loggerFormatter":"full"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-values-to-localizations-and-custom-attributes","name":"Akeneo - Prepare convert - Values - To localizations and custom attributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.*.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attribute_type"}},"conditions":[{"prototype":"equals","parameters":{"value":"pim_catalog_image"}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"_links"}]}}],"elseTransformers":[]}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"combinedKey","value":"locale:?{locale}|scope:?{scope}","mappers":[]}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"attribute_type"},{"key":"reference_data_name"}]}},{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":[]}},{"prototype":"equals","parameters":{"value":null}}]}}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"structure","parameters":{"key":"combinedKey","keys":[],"value":"\"\""}},"destination":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values.*.*","conditions":[],"replacement":"values.$2.$1"}},{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"values"}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":[]}},{"prototype":"equals","parameters":{"value":null}}]}}]}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"values.*.*.combinedKey"}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"*.data","conditions":[],"replacement":"customAttributes.$1"}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"*.scope","conditions":[],"replacement":"channelCode"}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"*.locale","conditions":[],"replacement":"localeCode"}},{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[]}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":[]}},{"prototype":"equals","parameters":{"value":null}}]}}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values.\"locale:|scope:\".customAttributes","conditions":[],"replacement":"customAttributes"}},{"meta":[],"prototype":"value-filter","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values.*"}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":[]}},{"prototype":"equals","parameters":{"value":null}}]}}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"values"}}}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"values","conditions":[],"replacement":"localizations"}}]}}]}},"description":"This transformer will convert localizations data from Akeneo.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-localizations-filter","name":"Akeneo - Prepare Convert - Localizations filter","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"localizations"}},"nodeFilters":[{"prototype":"or-condition","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"channelCode"}}}},{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"channelCode"}},"conditions":[{"prototype":"one-of","parameters":{"value":["ecommerce"]}}]}}]}},{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"channelCode"}}}}]}}],"nodeTransformers":[]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"localizations"}}}}]}}]}},"description":"We use this transformer to only allow any localization with channel code in **\"eCommerce\"**, if it has channel code.\n\nIf you need other channel code please add the value in the Node Filter.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-product-and-product-model-categories-to-alumio-base","name":"Akeneo - Prepare convert - Product and product model - Categories to Alumio Base","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"categories"}},"destination":{"prototype":"structure","parameters":{"key":"temp","keys":[],"root":"categories","value":"categoryCode"}},"stripEnclosures":true}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"key","parameters":{"keys":[],"root":"categories"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"temp"}]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"categories"}}}}]}}]}},"description":"Akeneo - Prepare convert - Product and product model - Categories to Alumio Base","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-prepare-convert-product-and-product-model-prices-to-alumio-base","name":"Akeneo - Prepare convert - Product and product model - Prices to Alumio Base","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"customAttributes.price","conditions":[],"replacement":"prices"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"prices.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"currency","conditions":[],"replacement":"currencyCode"}}]}}]}},"description":"Akeneo - Prepare convert - Product and product model - Prices to Alumio Base.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-convert-product-to-alumio-base-product","name":"Akeneo - Convert - Product - To Alumio Base product","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"code","value":"&{customAttributes.sku || identifier}","mappers":[]}]}},{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["parent","parentCode"],["enabled","statusCode"],["family","attributeSetCode"]],"comparator":"equals"}}],"accessor":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}},{"meta":[],"prototype":"value-remover","parameters":{"patterns":[{"key":"uuid"},{"key":"_links"},{"key":"created"},{"key":"updated"},{"key":"associations"},{"key":"quantified_associations"},{"key":"metadata"}]}}]}}]}},"description":"This transformer will convert Akeneo product data into Alumio base product data.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"akeneo-filter-simple-product","name":"Akeneo - Filter - Simple Product","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"type-setter","parameters":{"entityType":"base-product"}},{"meta":[],"prototype":"storage-filter-stored-entity","parameters":{"storage":"akeneo-filter-simple-products","addEntityToStorage":true}}]}},"description":"We use this transformer to filter previously created into task simple product to avoid duplication.","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"akeneo-filter-simple-products","name":"Akeneo - Filter - Simple Products","object":{"parameters":{"path":"akeneo-filter-simple-products-01K4MP6893EQQ6V0NHPRGT1WGY","logger":{"parameters":{"actions":[]}}}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"scheduler-entry","identifier":"alumio-to-centra-products-outgoing","name":"Alumio to Centra - Products (Outgoing)","object":{"parameters":{"job":[{"prototype":"run-outgoing","parameters":{"route":"synchronize-products-akeneo-to-centra-1","numTasks":100,"enableUnlimitedTasks":false}},{"prototype":"run-outgoing","parameters":{"route":"synchronize-products-akeneo-to-centra-simple-product","numTasks":100,"enableUnlimitedTasks":false}}],"handlers":[],"priority":2,"expression":"*/5 * * * *"}},"description":"Scheduler to Execute all tasks for Products to Commercetools","owner":null,"disabled":true}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-products-akeneo-to-centra-1","name":"Synchronize Products - Akeneo to Centra","object":{"parameters":{"incoming":"synchronize-products-akeneo-to-centra-fetch-storage-product-model-alumio-base","outgoing":"centra-send-product","realtime":false,"transformers":[],"waitingStatus":false,"parallelExecution":[]}},"description":"Route for synchronize Products from Alumio base (Storage) and send it to Centra","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"outgoing-configuration","identifier":"centra-send-product","name":"Centra - Send Product","object":{"parameters":{"publisher":{"prototype":"no-action-publisher","parameters":[]},"transformers":["centra-product-convert-from-alumio-base-product-base-mapping","centra-product-convert-from-alumio-base-product-send-to-centra"]}},"description":"Outgoing configuration to send the Products to Centra","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping","object":{"meta":[],"prototype":"chain","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-base-mapping-handle-children",{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"products.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure","centra-product-convert-from-alumio-base-product-handle-attributes","centra-product-convert-from-alumio-base-product-handle-custom-attributes","centra-product-convert-from-alumio-base-product-base-mapping-handle-variants","centra-product-convert-from-alumio-base-product-cleanups-before-send"]}}]}}]}},"description":"Convert Alumio Product structure into Centra structure","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-handle-children","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping (Handle Children)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"children"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"children":true}}}],"accessor":{"prototype":"key","parameters":{"keys":[]}}}},{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["children","products"]],"comparator":"equals"}}],"accessor":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}}],"elseTransformers":[{"prototype":"pattern-move","parameters":{"pattern":"*","conditions":[],"replacement":"products.0.$1"}}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping (Convert to Centra Structure)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-productnumber","centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-status","centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-brand","centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-weight","centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-prices"]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-productnumber","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping (Convert to Centra Structure - Set productNumber)","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"productNumber","value":"&{code || identifier}","mappers":[]},{"key":"name","value":"&{code || identifier}","mappers":[]}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-status","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping (Convert to Centra Structure - Set status)","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"statusCode"}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"equals","parameters":{"value":"false"}},{"prototype":"equals","parameters":{"value":0}},{"prototype":"equals","parameters":{"value":false}}]}}]}}],"elseCases":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"status","value":"INACTIVE","mappers":[]}]}}],"elseTransformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"status","value":"ACTIVE","mappers":[]}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-brand","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping (Convert to Centra Structure - Set brand)","object":{"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"brand.code","value":"&{customAttributes.brand || customAttributes.manufacturer || customAttributes.maker || customAttributes.vendor || customAttributes.label || `0`}","mappers":[]}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"centra-brand-code-to-id","storageKey":"&{brand.code}","destination":"brand.id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"brand.id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["code"],"root":"brand"}},"conditions":[]}}],"elseTransformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["brand"]}},"conditions":[]}}]}}]}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variants.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"brand.code","value":"&{customAttributes.brand || customAttributes.manufacturer || customAttributes.maker || customAttributes.vendor || customAttributes.label || `0`}","mappers":[]}]}},{"meta":[],"prototype":"storage-get-entity-from-storage","parameters":{"storage":"centra-brand-code-to-id","storageKey":"&{brand.code}","destination":"brand.id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"brand.id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["code"],"root":"brand"}},"conditions":[]}}],"elseTransformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["brand"]}},"conditions":[]}}]}}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"storage","identifier":"centra-brand-code-to-id","name":"Centra - Brand - Code to id","object":{"parameters":{"path":"centra-brand-code-to-id-01K5H8C04JQJNBQT59MV1B7SYX","logger":{"parameters":{"actions":[]}}}},"description":"Map Akeneo reference entity record code into Centra Brand id","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-weight","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping (Convert to Centra Structure - Set weight)","object":{"prototype":"chain","parameters":{"transformers":[]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-prices","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping (Convert to Centra Structure - Set prices)","object":{"prototype":"chain","parameters":{"transformers":[]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-handle-attributes","name":"Centra - Product - Convert from Alumio Base Product - Handle Attributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"assignDynamicAttributes","value":{"custom_attributes":{"attributeTypeName":"imported_product_attributes","attributeElementKey":"custom_attributes","attributeElementValue":"&{customAttributes}"},"custom_categories":{"attributeTypeName":"imported_product_attributes","attributeElementKey":"custom_categories","attributeElementValue":"&{categories}"},"localized_attributes":{"attributeTypeName":"imported_product_attributes","attributeElementKey":"localized_attributes","attributeElementValue":"&{localizations}"}},"mappers":[{"prototype":"list-values","parameters":[]}]}]}}]}},{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"assignDynamicAttributes.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"conditional","parameters":{"mappers":[{"prototype":"serialize","parameters":{"serializer":{"prototype":"json","parameters":{"flags":[]}}}}],"conditions":[{"prototype":"type-object","parameters":[]}]}},{"prototype":"conditional","parameters":{"mappers":[{"prototype":"serialize","parameters":{"serializer":{"prototype":"json","parameters":{"flags":[]}}}}],"conditions":[{"prototype":"type-array","parameters":{"strict":false}}]}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributeElementValue"}}}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-handle-custom-attributes","name":"Centra - Product - Convert from Alumio Base Product - Handle Custom Attributes","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"assignCustomAttributes","value":"&{customAttributes || `[]`}","mappers":[]}]}},{"meta":[],"prototype":"accessor-move","parameters":{"source":{"prototype":"key","parameters":{"keys":[],"root":"assignCustomAttributes"}},"destination":{"prototype":"structure","parameters":{"key":"attributeElementKey","keys":[],"root":"assignCustomAttributes","value":"attributeElementValue"}},"stripEnclosures":true}},{"meta":[],"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"attributeTypeName":"&{attributeSetCode}"},"childrenPattern":"assignCustomAttributes.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"assignCustomAttributes.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributeElementValue"}},"conditions":[{"prototype":"type-array","parameters":{"strict":true}}]}}],"elseCases":[{"filter":{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"attributeElementValue.unit"}}}},"transformer":{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"attributeElementValue","value":"&{attributeElementValue.value || attributeElementValue.amount} &{attributeElementValue.unit}","mappers":[]}]}}},{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributeElementValue"}},"conditions":[{"prototype":"type-object","parameters":[]}]}},"transformer":{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"serialize","parameters":{"serializer":{"prototype":"json","parameters":{"flags":[]}}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributeElementValue"}}}}},{"filter":{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributeElementValue"}},"conditions":[{"prototype":"logic-or","parameters":{"conditions":[{"prototype":"type-boolean","parameters":[]},{"prototype":"type-float","parameters":[]},{"prototype":"type-integer","parameters":[]},{"prototype":"type-numeric","parameters":[]}]}}]}},"transformer":{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"serialize","parameters":{"serializer":{"prototype":"json","parameters":{"flags":[]}}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributeElementValue"}}}}}],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributeElementValue.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-handle-custom-attributes-array"]}}]}}]}},{"meta":[],"prototype":"value-mapper","parameters":{"mappers":[{"prototype":"list-values","parameters":[]},{"prototype":"serialize","parameters":{"serializer":{"prototype":"json","parameters":{"flags":[]}}}},{"prototype":"list-implode","parameters":{"glue":", "}}],"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"attributeElementValue"}}}}],"elseTransformers":[]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"operator","parameters":{"left":"assignDynamicAttributes","right":"assignCustomAttributes","operator":"array-merge","destination":"assignDynamicAttributes"}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-handle-custom-attributes-array","name":"Centra - Product - Convert from Alumio Base Product - Handle Custom Attributes (Array)","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"conditional","parameters":{"filters":[{"prototype":"and-condition","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"amount"}}}}]}}],"elseCases":[],"transformers":[{"prototype":"value-setter","parameters":{"configurations":[{"key":"value","value":"&{amount || value} &{currency || unit || ``}","mappers":[]}]}},{"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"value":true}}},{"prototype":"list-values","parameters":[]}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-handle-variants","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping - Handle Variants","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"parentName":"&{name}"},"childrenPattern":"variants.*"}}]}},{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"variants.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-variants","centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-set-status","centra-product-convert-from-alumio-base-product-handle-attributes","centra-product-convert-from-alumio-base-product-handle-custom-attributes","centra-product-convert-from-alumio-base-product-cleanups-before-send-variants"]}}]}},{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-mapper","parameters":{"mappers":[{"prototype":"dictionary-map","parameters":{"map":[["variants","addProductVariants"]],"comparator":"equals"}}],"accessor":{"prototype":"key","parameters":{"keys":[]}},"stripEnclosures":true}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-base-mapping-convert-to-centra-structure-variants","name":"Centra - Product - Convert from Alumio Base Product - Base Mapping (Convert to Centra Structure - variants)","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"internalName","value":"&{code || identifier}","mappers":[]},{"key":"name","value":"&{parentName || ``}-&{code || identifier}","mappers":[]},{"key":"variantNumber","value":"&{code || identifier}","mappers":[]}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-cleanups-before-send-variants","name":"Centra - Product - Convert from Alumio Base Product - Cleanups before send - variants","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"name":true,"status":true,"product":true,"internalName":true,"variantNumber":true,"assignMappedAttributesX":true,"assignDynamicAttributesX":true}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-cleanups-before-send","name":"Centra - Product - Convert from Alumio Base Product - Cleanups before send","object":{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"list-mapper","parameters":{"mappers":[{"prototype":"list-intersect-keys","parameters":{"array":{"name":true,"brand":true,"folder":true,"status":true,"weight":true,"collection":true,"externalId":true,"productNumber":true,"internalComment":true,"addProductVariants":true,"assignMappedAttributes":true,"assignDynamicAttributes":true}}}],"accessor":{"prototype":"pattern","parameters":{"keys":[]}}}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"products.*"}},"nodeFilters":[],"nodeTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-send-to-centra-check-existing-product","centra-product-convert-from-alumio-base-product-send-to-centra-build-payload"]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-send-to-centra-update","centra-product-convert-from-alumio-base-product-send-to-centra-update-upsert-variants"]}}],"elseTransformers":[{"meta":[],"prototype":"list-transformer-wrapper","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-send-to-centra-create"]}}]}}]}}]}},"description":"Send the Products into Centra","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra-check-existing-product","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra - Check existing product","object":{"prototype":"chain","parameters":{"transformers":[{"prototype":"data","parameters":{"filters":[],"transformers":[{"prototype":"merger","parameters":{"template":{"id":"&{data.products[0].id || `0`}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"centra-http-client","request":{"uri":"/graphql","method":"POST","payload":{"query":"query products($where: ProductFilter!) {\n  products (where: $where) {\n    id\n    name\n  }\n}","variables":{"where":{"name":{"equals":"&{name}"}}}}}}}}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["id"]}},"conditions":[]}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"http-client","identifier":"centra-http-client","name":"Centra - HTTP Client","object":{"prototype":"centra-graphql-client","parameters":{"baseUri":"https://sandbox.centraqa.com","advanced":[],"apiToken":"${CENTRA_API_TOKEN}","enableLogging":true,"loggerFormatter":"full"}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra-build-payload","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra - Build Payload","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"*","conditions":[],"replacement":"input.$1"}},{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"input.id","conditions":[],"replacement":"id"}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"id"}}}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"pattern-move","parameters":{"pattern":"input.addProductVariants","conditions":[],"replacement":"addProductVariants"}},{"prototype":"recursively-copy-values-to-children","parameters":{"mergeTemplate":{"product":{"id":"&{id}"}},"childrenPattern":"addProductVariants.*"}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra-update","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra (Update)","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"update_result":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"centra-http-client","request":{"uri":"/graphql","method":"POST","payload":{"query":"mutation updateProduct($id: Int, $input: ProductUpdateInput!) {\n  updateProduct(id: $id, input: $input) { \n    product { \n      id\n      productNumber\n      name\n      variants { \n        id\n        name\n        variantNumber \n      } \n    } \n    userErrors { \n      message \n    } \n  } \n}","variables":{"id":"&{id}","input":"&{input}"}}}}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"errors","value":"&{length(update_result.data.updateProduct.userErrors)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"errors"}},"conditions":[{"prototype":"number-greater-than","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"exception","parameters":{"message":"Error on Update Product!"}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra-update-upsert-variants","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra (Update - Upsert Variants) ","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"prototype":"node","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"addProductVariants.*"}},"nodeFilters":[],"nodeTransformers":[{"prototype":"list-transformer-wrapper","parameters":{"transformers":["centra-product-convert-from-alumio-base-product-send-to-centra-check-existing-product-variant","centra-product-convert-from-alumio-base-product-send-to-centra-build-payload",{"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-exists-condition","parameters":{"path":"id"}}}}],"transformers":["centra-product-convert-from-alumio-base-product-send-to-centra-update-upsert-variants-send-update"]}},{"prototype":"conditional","parameters":{"filters":[{"prototype":"key-condition","parameters":{"filter":{"prototype":"key-not-exists-condition","parameters":{"path":"id"}}}}],"transformers":["centra-product-convert-from-alumio-base-product-send-to-centra-update-upsert-variants-send-create"]}}]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra-check-existing-product-variant","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra - Check existing product variant","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"id":"&{data.productVariants[0].id || `0`}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"centra-http-client","request":{"uri":"/graphql","method":"POST","payload":{"query":"query productVariants($where: ProductVariantFilter!) {\n  productVariants (where: $where) {\n    id\n    name\n  }\n}","variables":{"where":{"name":{"equals":"&{name}"}}}}}}}}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"id"}},"conditions":[{"prototype":"equals","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"key","parameters":{"keys":["id"]}},"conditions":[]}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra-update-upsert-variants-send-update","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra (Update - Upsert Variants) - send update","object":{"meta":[],"prototype":"chain","parameters":{"transformers":[{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"key-filter","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"input.product"}},"conditions":[]}},{"meta":[],"prototype":"merger","parameters":{"template":{"update_result":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"centra-http-client","request":{"uri":"/graphql","method":"POST","payload":{"query":"mutation updateProductVariant($id: Int, $input: ProductVariantUpdateInput!) {\n  updateProductVariant(id: $id, input: $input) { \n    productVariant { \n      id\n      name\n    } \n    userErrors { \n      message \n    } \n  } \n}","variables":{"id":"&{id}","input":"&{input}"}}}}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"errors","value":"&{length(update_result.data.updateProductVariant.userErrors)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"errors"}},"conditions":[{"prototype":"number-greater-than","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"exception","parameters":{"message":"Error on Update Product Variant!"}}],"elseTransformers":[]}}]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra-update-upsert-variants-send-create","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra (Update - Upsert Variants) - send create","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"create_result":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"centra-http-client","request":{"uri":"/graphql","method":"POST","payload":{"query":"mutation createProductVariant($input: ProductVariantCreateInput!) {\n  createProductVariant(input: $input) { \n    productVariant { \n      id\n      name\n    } \n    userErrors { \n      message \n    } \n  } \n}","variables":{"input":"&{input}"}}}}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"errors","value":"&{length(create_result.data.createProductVariant.userErrors)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"errors"}},"conditions":[{"prototype":"number-greater-than","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"exception","parameters":{"message":"Error on Create Product Variant!"}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"list-transformer","identifier":"centra-product-convert-from-alumio-base-product-send-to-centra-create","name":"Centra - Product - Convert from Alumio Base Product - Send to Centra (Create)","object":{"meta":[],"prototype":"data","parameters":{"filters":[],"transformers":[{"meta":[],"prototype":"merger","parameters":{"template":{"create_result":"&{@}"},"transformer":{"meta":[],"prototype":"graphql-transformer","parameters":{"client":"centra-http-client","request":{"uri":"/graphql","method":"POST","payload":{"query":"mutation CreateProduct($input: ProductCreateInput!) {\n  createProduct(input: $input) { \n    product { \n      id\n      productNumber\n      name\n      variants { \n        id\n        name\n        variantNumber \n      } \n    } \n    userErrors { \n      message \n    } \n  } \n}","variables":{"input":"&{input}"}}}}}}},{"meta":[],"prototype":"value-setter","parameters":{"configurations":[{"key":"errors","value":"&{length(create_result.data.createProduct.userErrors)}","mappers":[]}]}},{"meta":[],"prototype":"conditional","parameters":{"filters":[{"prototype":"value-condition-v2","parameters":{"accessor":{"prototype":"pattern","parameters":{"keys":[],"pattern":"errors"}},"conditions":[{"prototype":"number-greater-than","parameters":{"value":0}}]}}],"elseCases":[],"transformers":[{"meta":[],"prototype":"exception","parameters":{"message":"Error on Create Product!"}}],"elseTransformers":[]}}]}},"description":"","owner":null,"disabled":false}
{"$schema":"https://di.schema.alumio.com/register.configuration.json","type":"route-configuration","identifier":"synchronize-products-akeneo-to-centra-simple-product","name":"Synchronize Products - Akeneo to Centra (Simple Product)","object":{"parameters":{"incoming":"akeneo-fetch-simple-products-or-products-without-parent","outgoing":"centra-send-product","realtime":false,"transformers":[],"waitingStatus":false,"parallelExecution":[]}},"description":"Route for synchronize Simple Products from Akeneo and send it to Centra","owner":null,"disabled":false}